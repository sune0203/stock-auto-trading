# 📊 시장 상태 표시 시스템

## 🎯 시간대별 표시

### 1. 프리마켓 (Pre-market)
**시간**: EST 04:00 ~ 09:30
**한국시간**: 
- Summer Time: 17:00 ~ 22:30
- 동절기: 18:00 ~ 23:30

**표시**:
```
🟡 프리마켓 (Summer)     또는    🟡 프리마켓
   정규장까지 X시간 Y분              정규장까지 X시간 Y분
   
뱃지: 🟡 실시간
```

### 2. 정규장 (Regular Hours)
**시간**: EST 09:30 ~ 16:00
**한국시간**:
- Summer Time: 22:30 ~ 05:00
- 동절기: 23:30 ~ 06:00

**표시**:
```
🟢 정규장
   마감까지 X시간 Y분
   
뱃지: 🟢 실시간
```

### 3. 애프터마켓 (After-market)
**시간**: EST 16:00 ~ 17:00
**한국시간**:
- Summer Time: 05:00 ~ 06:00
- 동절기: 06:00 ~ 07:00

**표시**:
```
🟡 애프터마켓 (Summer)    또는    🟡 애프터마켓
   종료까지 X시간 Y분                 종료까지 X시간 Y분
   
뱃지: 🟡 실시간
```

### 4. 애프터마켓 연장 (After-market Extended)
**시간**: EST 17:00 ~ 19:00
**한국시간**: 07:00 ~ 09:00 (Summer Time 동일)

**표시**:
```
🟡 애프터마켓 연장
   종료까지 X시간 Y분
   
뱃지: 🟡 실시간
```

### 5. 주간거래 (Day Market / 데이마켓)
**시간**: EST 19:00 ~ 04:00
**한국시간**:
- Summer Time: 09:00 ~ 17:00
- 동절기: 10:00 ~ 18:00

**표시**:
```
🔴 주간거래 (데이터 반영불가)
   프리마켓까지 X시간 Y분
   
뱃지: ⏸️ 데이터 반영불가
```

### 6. 주말 (Weekend)
**시간**: 토요일, 일요일

**표시**:
```
🔴 주말 휴장
   월요일 오픈까지 X일 Y시간
   
뱃지: ⏸️ 데이터 반영불가
```

---

## 🎨 시각적 표현

### 색상 구분
- **🟢 녹색**: 정규장 (매매 가능)
- **🟡 노랑**: 프리마켓/애프터마켓 (실시간 가격, 매매 불가)
- **🔴 빨강**: 주간거래/주말 (데이터 없음, 매매 불가)

### 애니메이션
- 모든 상태 표시등에 펄스 애니메이션 적용
- 색상에 따라 다른 글로우 효과

---

## 🕐 Summer Time 자동 감지

### 계산 로직
```typescript
// 3월 두번째 일요일 ~ 11월 첫번째 일요일
const isSummerTime = (date: Date): boolean => {
  const year = date.getFullYear()
  const month = date.getMonth() // 0-11
  
  // 3월 이전 또는 11월 이후 = 동절기
  if (month < 2 || month > 10) return false
  
  // 4월~10월 = Summer Time
  if (month > 2 && month < 10) return true
  
  // 3월: 두번째 일요일부터
  // 11월: 첫번째 일요일 전까지
}
```

### 표시 예시
**2025년 10월 29일 (Summer Time 적용 중)**
```
🟡 프리마켓 (Summer)
🟡 애프터마켓 (Summer)
```

**2025년 12월 15일 (동절기)**
```
🟡 프리마켓
🟡 애프터마켓
```

---

## 📋 실시간 데이터 가용성

| 시간대 | 실시간 데이터 | 매매 가능 | FMP API | KIS API |
|--------|-------------|----------|---------|---------|
| **프리마켓** | ✅ | ❌ | ✅ | ❌ |
| **정규장** | ✅ | ✅ | ✅ | ✅ |
| **애프터마켓** | ✅ | ❌ | ✅ | ❌ |
| **애프터 연장** | ✅ | ❌ | ✅ | ❌ |
| **주간거래** | ❌ | ❌ | 전일종가 | ❌ |
| **주말** | ❌ | ❌ | 전일종가 | ❌ |

---

## 🎯 사용자 경험

### 현재 시각: 10:30 AM (주간거래)
```
화면 표시:
┌─────────────────────────────────────┐
│ 🔴 주간거래 (데이터 반영불가)          │
│    프리마켓까지 6시간 30분             │
└─────────────────────────────────────┘
┌─────────────────────────────────────┐
│ ⏸️ 데이터 반영불가                    │
└─────────────────────────────────────┘

가격: $1.98 (전일 종가)
```

### 17:00 이후 (프리마켓)
```
화면 표시:
┌─────────────────────────────────────┐
│ 🟡 프리마켓 (Summer)                  │
│    정규장까지 5시간 30분               │
└─────────────────────────────────────┘
┌─────────────────────────────────────┐
│ 🟡 실시간                             │
└─────────────────────────────────────┘

가격: $2.05 (FMP 실시간)
```

### 22:30 이후 (정규장)
```
화면 표시:
┌─────────────────────────────────────┐
│ 🟢 정규장                             │
│    마감까지 6시간 30분                 │
└─────────────────────────────────────┘
┌─────────────────────────────────────┐
│ 🟢 실시간                             │
└─────────────────────────────────────┘

가격: $2.05 (FMP 실시간)
호가: 매수 $2.04 / 매도 $2.06 (KIS 실시간)
```

---

## ✅ 구현 완료

- ✅ 6가지 시장 상태 자동 감지
- ✅ Summer Time 자동 계산 및 표시
- ✅ 실시간 데이터 가용성 표시
- ✅ 다음 시간대까지 남은 시간 자동 계산
- ✅ 색상 및 애니메이션 구분
- ✅ 1초마다 자동 업데이트

**사용자는 한눈에 현재 시장 상태와 실시간 데이터 가용성을 확인할 수 있습니다!**

